<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Fault-Driven Memory Tracking</title>

    <link rel="stylesheet" href="../dist/reset.css">
    <link rel="stylesheet" href="../dist/reveal.css">
    <link rel="stylesheet" href="../dist/custom.css">
    <link rel="stylesheet" href="../dist/theme/dusk.css">

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="../plugin/highlight/dusk.css">
</head>
<body>
<div class="qr-container mobile-hide" style="position: relative">
    <img class="qr" alt="qr" src="../images/meetup-qr.svg">
</div>

<div class="reveal">
    <div class="slides">
        <section>
            <section>
                <h3>Fault-Driven Memory Tracking</h3>
                <p>Segfaults ain't all bad</p>
            </section>
            <section>
                <div id=intro>
                    <div id=contact-info>
                        <div class=contact-row>
                            Eduardo Leegwater Sim√µes
                        </div>
                        <div class=contact-row>
                            Software Engineer
                        </div>
                        <div class=contact-row>
                            <a class=contact-link href="https://www.linkedin.com/in/eduardo-leegwater-sim%C3%B5es" target="_blank">
                                <img src="../images/linkedin-logo.svg" alt="linkedin">
                            </a>
                            <a class=contact-link href="https://github.com/ureeves" target="_blank">
                                <img src="../images/github-logo.svg" alt="github">
                            </a>
                        </div>
                    </div>

                    <div id=company-logos>
                        <img id=contact-logo-dusk src="../images/dusk-logo.svg" alt="dusk">
                        <img id=contact-logo-rust src="../images/rust-logo.png" alt="rust">
                    </div>
                </div>
            </section>
        </section>
        <section>
            <section>
                <h3>Virtual Machine</h3>
            </section>
            <section data-transition=none>
                <h3>Virtual Machine</h3>
                <img class="virtual-machine" src="../images/virtual-machine.svg" alt="vm">
            </section>
            <section data-transition=none>
                <h3>Virtual Machine</h3>
                <img class="virtual-machine" src="../images/virtual-machine-memory.svg" alt="vm-memory">
            </section>
            <section data-transition=none>
                <h3>Virtual Machine</h3>
                <img class="virtual-machine" src="../images/virtual-machine-memory-state.svg" alt="vm-memory-state">
            </section>
            <section data-transition="none slide-in">
                <img class="virtual-machine" src="../images/single-contract-memory.svg" alt="single-contract-memory">
            </section>
            <section data-transition=none>
                <img class="virtual-machine" src="../images/single-contract-memory-dirty.svg" alt="single-contract-memory-dirty">
            </section>
            <section data-transition=none>
                <img class="virtual-machine" src="../images/single-contract-memory-dirty-os.svg" alt="single-contract-memory-dirty-os">
            </section>
        </section>
        <section>
            <section>
                <h3>Memory Tracking</h3>
            </section>
            <section>
                <p class=syscall-title>mmap(), munmap()</p>
                <p class=syscall-description>map or unmap files or devices into memory</p>
                <pre><code data-trim data-noescape>
                #include &ltsys/mman.h&gt

                void *mmap(void addr[.length], size_t length, int prot,
                           int flags, int fd, off_t offset);

                int munmap(void addr[.length], size_t length);
                </code></pre>
            </section>
            <section>
                <div class=syscall-signals>
                    <p>Use of a mapped region can result in these signals:</p>

                    <p class=syscall-signal>SIGSEGV</p>
                    <p class=syscall-signal-description>Attempted to write to a region mapped as read-only.</p>

                    <p class=syscall-signal>SIGBUS</p>
                    <p class=syscall-signal-description>
                       Attempted access to a page of the buffer that lies
                       beyond the end of the mapped file.
                    </p>
                </div>
            </section>
            <section>
                <p class=syscall-title>sigaction()</p>
                <p class=syscall-description>examine and change a signal action</p>
                <pre><code data-trim data-noescape>
                #include &ltsignal.h&gt

                int sigaction(
                    int signum,
                    const struct sigaction *_Nullable restrict act,
                    struct sigaction *_Nullable restrict oldact
                );
                </code></pre>
            </section>
            <section>
                <p class=syscall-title>mprotect()</p>
                <p class=syscall-description>set protection on a region of memory</p>
                <pre><code data-trim data-noescape>
                #include &ltsys/mman.h&gt

                int mprotect(void addr[.len], size_t len, int prot);
                </code></pre>
            </section>
            <section>
                <h3>Memory Tracking</h3>
                <h4 style="margin-bottom: 1em">Strategy</h4>
                <ol>
                    <li class="fragment stategy-item">Map memory region as read-only</li>
                    <li class="fragment stategy-item">Catch write using SIGSEGV handler</li>
                    <li class="fragment stategy-item">Mark memory region as written</li>
                    <li class="fragment stategy-item">Allow writing to the memory region</li>
                </ol>
            </section>
        </section>
    </div>
</div>

<script src="../dist/reveal.js"></script>
<script src="../plugin/notes/notes.js"></script>
<script src="../plugin/markdown/markdown.js"></script>
<script src="../plugin/highlight/highlight.js"></script>

<script>
    // More info about initialization & config:
    // - https://revealjs.com/initialization/
    // - https://revealjs.com/config/
    Reveal.initialize({
        hash: true,

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes]
    });
</script>
</body>
</html>
